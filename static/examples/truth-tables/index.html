<!DOCTYPE html>
<html>
<head>
    <title>Truth Tables | CI - Neural Networks</title>
    <script type="text/javascript" src="/src/bundle.js"></script>
    <script type="text/javascript">
        var ANN = require('NeuralNetwork');
        var tables = require('truth-tables');
        var $ = require('jquery');
        var NetworkUtil = require('NetworkUtil');

        /**
         * @param options
         * @returns {NeuralNetwork}
         */
        function getNeuralNetwork(options) {
            var settings = $.extend({
                inputLayerCount: Number($('#inputs').val()),
                hiddenLayerCount: Number($('#hiddenLayerCount').val()),
                hiddenLayerNeuronCount: Number($('#hiddenLayerLength').val())
            }, options);
            return new ANN(settings);
        }

        function getTrainingSet() {
            return tables[$('#data-set').val()]();
        }

        $(function() {
            var t = getTrainingSet();
            var network = getNeuralNetwork();
            var $output = $('#output');
            var $network = $('#network');

            $('#test').click(function() {
                var results = NetworkUtil.five2Training(network, t);
                $output.html(results);
                $network.html(network.toString());
            });

            $('#train').click(function() {
                NetworkUtil.train(network, t, Number($('#button-panel #n').val()));
                $output.html(network.getOutput());
                $network.html(network.toString());
            });

            $('#train-once').click(function() {
                NetworkUtil.trainOnce(network, t);
                $output.html(network.getOutput());
                $network.html(network.toString());
            });

            $('#new').click(function() {
                network = getNeuralNetwork();
                t = getTrainingSet();
            });
        });
    </script>
</head>
<body>
    Try Training: <br/>
    <div id='controls'>
        Inputs: <input type='text' id='inputs' value='2'>
        HiddenLayerLength: <input type='text' id='hiddenLayerLength' value='2'>
        HiddenLayerCount: <input type='text' id='hiddenLayerCount' value='5'>
        DataSet:
        <select id='data-set'>
            <option selected=selected value='XplusY'>x + y</option>
            <option value='XY'>x * y</option>
        </select>
        <button id='new'>Create ANN</button>
    </div>
    <div id='button-panel'>
        <button id='train'>Train</button><input type='text' id='n'><br/>
        <button id='train-once'>Train Once</button><br/>
        <button id='test'>Test</button>
    </div>
    <div id='output'></div>
    <div id='network'></div>
</body>
</html>